---
title: 8.计算机网络-网络安全(下)
date: 2016-08-09
tags:
    - 计算机网络
---
本文简单介绍一下计算网络的网络安全，主要介绍一下Internet上使用的安全协议，包括SSL,IPSec。

<!-- more -->

## Internet上使用的安全协议
### 1、安全嵌套字协议SSL

![](/img/compute_network/8-1.png)

位于应用层和传输层之间

作用：应用层给传输层数据之前，需要对数据进行加密。
对于网站登录名、密码时，需要使用SSL协议，此时由http变为https

SSL实现原理：

- A访问网站，网站将自己的公钥给A
- A将利用对称秘钥对登录信息进行加密
- A利用web的公钥对对称秘钥加密，随后把数据发给服务器
- 服务器利用私钥解密，利用解密出来的对称秘钥对数据进行解密

Internet上常用的使用SSl协议的端口

- imaps tcp-993
- pop3s tcp-995
- smtps tcp-465
- https tcp-443

SSL提供的功能

- SSL服务器鉴别：允许用户证实服务器的身份。具有SSL功能的浏览器维持一张表，上面有一些可信赖的认证中心CA和他们的公钥。
- 加密的SSL会话：客户和服务器交互的所有数据，都在发送方加密，在接收方解密。
- SSL客户端鉴别 ：允许服务器正式客户身份。

### 2、网络层安全IPSec

网络层安全是底层加密。

IPsec工作原理：

- 服务器和客户端进行通信之前，进行协商，进行SA（安全关联）
- SA主要是协商是否签名、是否加密。协商好后进行传输。
- SA只签名不加密，使用AH协议；如果既签名又加密，使用ESP协议。

IPsec中的主要协议

- AH（鉴别首部）：鉴别源点和检查数据的完整性，但不能保密（只签名）
- ESP（封装安全有效载荷）：比AH复杂，鉴别源点，检查数据的完整性和提供保密（签名+加密）

#### 2.1、鉴别首部协议AH

![](/img/compute_network/8-2.png)

数据包在传输层和网络层之间插入一个AH首部,IP数据包的协议字段设置为51

协议详解：

- 下一个首部：TCP字段在什么位置
- 有效负载长度
- 保留
- 安全参数索引SPI：固定值
- 序列号：数据包序号
- 鉴别数据：鉴别数据包

#### 2.2、封装安全有效载荷ESP协议

![](/img/compute_network/8-3.png)

IP数据包的协议字段设置为50

协议详解：

- ESP首部：安全参数所以SPI、序号。
- 利用ESP鉴别进行数据的鉴定。

**注：**
```
数字签名、对称加密、非对称加密均为应用层安全
SSL应用层和传输层之间的安全
```

### 3、数据链路层安全

- 数据包进入路由器时，进行加密，出路由器时，进行解密。
- PPP身份验证
- ADSL用户密码登录
- 防火墙
    - 网络层防火墙：看不到数据包的内容。基于数据包的源地址、目标地址、协议和端口来进行控制流量
    - 应用级防火墙：能够看到数据包中的内容。基于数据包的源地址、目标地址、协议和端口、用户名、时间段、内容进行控制流量